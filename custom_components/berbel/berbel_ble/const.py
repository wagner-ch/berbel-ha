"""Constants for the Berbel BLE module."""

# UUIDs for BLE characteristics (modern protocol)
READ_STATE = "F006F005-5745-4053-8043-62657262656C"
READ_WRITE_LIGHT_BRIGHTNESS = "F006F006-5745-4053-8043-62657262656C"
READ_WRITE_LIGHT_COLOR = "F006F007-5745-4053-8043-62657262656C"
WRITE_COMMANDS = "F006F006-5745-4053-8043-62657262656C"  # For light and fan commands

# Legacy (older models) UUIDs from template Java (Hood.java)
# Note: Older app uses a different protocol: ASCII commands written to RX with a PIN prefix.
# We expose these here for detection and future support.
LEGACY_UUID_SERVICE = "52017769-797c-4cdd-9ff7-628b4eae5c9f"
LEGACY_UUID_SERVICE_2018 = "eb0ebe81-7dd6-489c-b0fc-2ede8e9c37fe"
LEGACY_UUID_RX = "58f49d41-c83e-4e5d-afe6-f3257c56effa"
LEGACY_UUID_RX_2018 = "00a12d11-2172-4aae-869e-777e169ea742"
LEGACY_UUID_TX = "204c70ff-3227-4c46-a862-59d9f201b272"
LEGACY_UUID_KONFIG = "51a6bb05-25ce-40a4-b184-c91afbb4327e"
DEFAULT_LEGACY_DEVICE_NAME = "HOOD_PER"
LEGACY_DEFAULT_PIN = "1234"

# Constants for status parsing
LIGHT_ON_MASK = 0x10
FAN_LEVEL_1 = 0x10  # Byte 0 = 0x10 (correctly confirmed)
FAN_LEVEL_2 = 0x01  # Byte 1 = 0x01 (corrected from 0x10)
FAN_LEVEL_3 = 0x10  # Byte 1 = 0x10 (corrected from 0x18)
FAN_LEVEL_4 = 0x19  # Unknown (no level 4 available)
POSTRUN_MASK = 0x90

# Constants for Kelvin calculation
MAX_KELVIN = 6500
MIN_KELVIN = 2700

# Base commands (31 bytes) for light control (modern protocol)
# Format: 01630000TTBB00000000000000000000000000000000000000000000000000
# TT = Top light (position 8-9), BB = Bottom light (position 10-11)
# ff = full brightness, 00 = off

# Light commands - Individual
CMD_LIGHT_TOP_ON = bytes.fromhex("0163000000ff00000000000000000000000000000000000000000000000000")
CMD_LIGHT_TOP_OFF = bytes.fromhex("01630000000000000000000000000000000000000000000000000000000000")
CMD_LIGHT_BOTTOM_ON = bytes.fromhex("01630000ff0000000000000000000000000000000000000000000000000000")
CMD_LIGHT_BOTTOM_OFF = bytes.fromhex("01630000000000000000000000000000000000000000000000000000000000")

# Light commands - Both simultaneously
CMD_BOTH_LIGHTS_ON = bytes.fromhex("01630000ffff00000000000000000000000000000000000000000000000000")
CMD_BOTH_LIGHTS_OFF = bytes.fromhex("01630000000000000000000000000000000000000000000000000000000000")

# Fan commands (31 bytes)
# Format: 015800000000000000000000000000LL0000000000000000000000000000
# LL = Fan level at position 30-31
CMD_FAN_OFF = bytes.fromhex("01580000000000000000000000000000000000000000000000000000000000")
CMD_FAN_LEVEL_1 = bytes.fromhex("01580000000000000000000000000000010000000000000000000000000000")
CMD_FAN_LEVEL_2 = bytes.fromhex("01580000000000000000000000000000020000000000000000000000000000")
CMD_FAN_LEVEL_3 = bytes.fromhex("01580000000000000000000000000000030000000000000000000000000000")
